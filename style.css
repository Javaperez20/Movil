/* style.css - completo y consolidado
   Actualizaci√≥n: mejora de contraste en modo oscuro para botones, tarjetas e inputs.
   Mantiene: auto-resize-friendly textareas, dynamic header, important panel, toggles,
   off-canvas, modal, focus animation, spacing adjustments, etc.
*/

/* ========== Variables (light defaults) ========== */
:root{
  --bg: #f7f8fb;
  --card: #ffffff;
  --accent: #2b7cff;
  --btn-bg: var(--accent);
  --btn-text: #ffffff;
  --muted: #666666;
  --border: #e3e6ef;
  --card-border: #e3e6ef;
  --input-border: #e3e6ef;
  --input-bg: #ffffff;
  --badge-bg: #eef3f6;
  --badge-color: #5a6672;
  --modal-overlay: rgba(12,18,28,0.45);
  --text: #111111;
  --shadow: rgba(20,40,80,0.06);
  --card-shadow: 0 8px 18px rgba(20,40,80,0.06);
  --accent-cool: rgb(137,182,231);
  --accent-urgent: rgb(255,105,97);

  /* layout constants */
  --baseline-height: 38px;
  --space-after-actions: 18px;
  --space-after-important: 18px;
}

/* ========== Dark theme overrides (improved contrast) ========== */
html[data-theme="dark"]{
  --bg: #0b1220;                 /* page background */
  /* cards and inputs: slightly lighter than page bg to create separation */
  --card: #0f1a2b;               /* card background (dark but lighter than page) */
  --input-bg: #0e2234;           /* input / textarea background */
  /* accent/button: keep accent but slightly brighter for visibility */
  --accent: #4ea8ff;
  --btn-bg: #2f9bff;             /* button background in dark */
  --btn-text: #0b1220;           /* button text color on light button bg - but we will use white for contrast below */
  --muted: #9aa6b2;
  --border: #1f2937;
  --card-border: #1b2a3a;
  --input-border: #22303f;
  --badge-bg: rgba(255,255,255,0.04);
  --badge-color: #dbe7ff;
  --modal-overlay: rgba(2,6,23,0.7);
  --text: #e6eefb;
  --shadow: rgba(0,0,0,0.6);
  --card-shadow: 0 10px 28px rgba(0,0,0,0.55);
}

/* ========== Base ========== */
* { box-sizing: border-box; }
html,body { height:100%; }
body {
  margin:0;
  padding:20px;
  font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
  background: var(--bg);
  color: var(--text);
  -webkit-font-smoothing:antialiased;
  -moz-osx-font-smoothing:grayscale;
  transition: background .18s ease, color .18s ease;
  line-height: 1.4;
}

/* ========== Header ========== */
.header-row { display:flex; gap:16px; align-items:flex-start; justify-content:space-between; max-width:1100px; margin:0 auto; }
.header-left { flex:1 1 auto; min-width:0; }
header h1 { margin:0 0 6px 0; font-size:1.2rem; }
.muted { color:var(--muted); font-size:0.95rem; }

/* ========== Controls ========== */
.header-controls { display:flex; gap:10px; align-items:flex-start; justify-content:flex-end; }
.top-buttons { display:flex; gap:8px; align-items:center; }

/* Icon buttons */
.icon-btn, .theme-btn, .gear-btn {
  background: transparent;
  border: 1px solid var(--border);
  padding: 6px 8px;
  border-radius: 8px;
  cursor: pointer;
  font-size: 16px;
  color: var(--text);
}
.icon-btn { font-size:20px; border-radius:10px; }

/* ========== Buttons ========== */
/* use variables so dark mode can override appearance */
.btn {
  background: var(--btn-bg);
  color: var(--btn-text, #fff);
  border: 0;
  padding: 8px 12px;
  border-radius: 6px;
  cursor: pointer;
  font-weight:600;
  display:inline-flex;
  align-items:center;
  gap:8px;
  box-shadow: var(--card-shadow);
}
.btn:hover { filter: brightness(.98); transform: translateY(-1px); }
.btn.ghost {
  background: transparent;
  color: var(--muted);
  border: 1px solid var(--border);
}

/* small icon button */
.icon-small-btn {
  background: #f4f6fb;
  border: 1px solid var(--border);
  border-radius: 6px;
  padding: 6px 8px;
  cursor: pointer;
  display:inline-flex;
  align-items:center;
  justify-content:center;
}

/* Adjust button colors specifically in dark mode for contrast */
html[data-theme="dark"] .btn {
  background: var(--btn-bg); /* overridden above */
  color: #fff;               /* keep text readable */
}
html[data-theme="dark"] .icon-small-btn {
  background: rgba(255,255,255,0.03);
  border-color: var(--input-border);
}

/* ========== Page toggle ========== */
.page-toggle { max-width:1100px; margin:12px auto 0; display:flex; gap:6px; }
.seg-btn {
  border: 1px solid var(--border);
  background: var(--card);
  padding: 8px 12px;
  border-radius: 8px;
  cursor: pointer;
  font-weight: 600;
  color: var(--text);
  box-shadow: var(--card-shadow);
}
.seg-active { background: var(--accent); color: #fff; }

/* ========== Main ========== */
main { display:grid; grid-template-columns:1fr; gap:20px; max-width:1100px; margin:18px auto; }
.page { display:none; }
.page.active { display:block; }

/* ========== Controls / Search ========== */
.controls { display:flex; gap:16px; flex-wrap:wrap; align-items:center; }
.search-group { display:flex; gap:8px; flex:1; align-items:center; }

/* ensure search input matches other inputs */
.search-group input[type="search"] {
  padding:8px 10px;
  border-radius:6px;
  border:1px solid var(--input-border);
  min-height: var(--baseline-height);
  height: auto;
  background: var(--input-bg);
  color: var(--text);
  font-family: inherit;
  font-size: 1rem;
  width: 100%;
  box-sizing: border-box;
  box-shadow: var(--card-shadow);
}

/* ========== Inputs area ========== */
.inputs-area {
  margin-top:8px;
  padding:12px;
  border-radius:8px;
  border:1px dashed var(--input-border);
  background: linear-gradient(180deg, var(--card), color-mix(in srgb, var(--card) 92%, black 2%));
  box-shadow: var(--card-shadow);
}
.input-row { display:flex; gap:8px; align-items:flex-start; margin-bottom:10px; }
.input-row label { min-width:140px; font-weight:600; padding-top:8px; color:var(--text); }

/* ID input baseline */
.input-row input[type="text"], .input-row input[type="search"] {
  flex:1;
  padding:8px 10px;
  border-radius:6px;
  border:1px solid var(--input-border);
  min-height: var(--baseline-height);
  height: auto;
  background: var(--input-bg);
  color: var(--text);
  box-shadow: none;
}

/* Textareas baseline same vertical measure as ID input; JS expands them */
.input-row textarea {
  flex:1;
  padding:8px 10px;
  border-radius:6px;
  border:1px solid var(--input-border);
  min-height: var(--baseline-height);
  resize: none;
  font-family: inherit;
  line-height: 1.4;
  overflow: hidden;
  background: var(--input-bg);
  color: var(--text);
}

/* read-only */
.input-row .readonly { background: #f4f6fb; color:#223; }

/* make inputs/textarea look distinct on dark bg */
html[data-theme="dark"] .inputs-area { border-color: var(--card-border); }
html[data-theme="dark"] .input-row input[type="text"],
html[data-theme="dark"] .input-row textarea,
html[data-theme="dark"] .search-group input[type="search"] {
  background: var(--input-bg);
  border: 1px solid var(--input-border);
  color: var(--text);
  box-shadow: none;
}

/* ========== Dynamic / Options areas ========== */
.dynamic-fields, .options-fields, #dynamicFields, #optionsFields {
  margin-top:12px;
  padding:12px;
  border-radius:8px;
  border:1px dashed var(--input-border);
  background: linear-gradient(180deg, var(--card), color-mix(in srgb, var(--card) 92%, black 2%));
}
.options-toggle-container {
  margin-top:12px;
  padding:8px;
  border-radius:8px;
  border:1px dashed var(--input-border);
  background: linear-gradient(180deg, var(--card), color-mix(in srgb, var(--card) 92%, black 2%));
  display:flex;
  gap:8px;
  flex-wrap:wrap;
  align-items:center;
}

/* pill opt buttons */
.opt-btn {
  padding:8px 12px;
  border-radius:999px;
  border:1px solid var(--input-border);
  background:var(--card);
  cursor:pointer;
  font-weight:600;
  color:var(--text);
  transition: all .12s ease;
}
.opt-btn:hover { transform: translateY(-2px); }
.opt-btn.active {
  background: var(--accent);
  color: #fff;
  border-color: transparent;
  box-shadow: 0 6px 18px rgba(43,124,255,0.18);
}

/* ========== Actions layout & spacing ========== */
.actions {
  display:flex;
  align-items:center;
  gap:10px;
  width:100%;
  flex-wrap:nowrap;
  box-sizing:border-box;
  margin-bottom: var(--space-after-actions);
}
.actions-left { display:flex; gap:10px; align-items:center; }
.actions-right { margin-left:auto; display:flex; gap:10px; align-items:center; }

/* ========== Cards ========== */
.cards-grid { display:grid; grid-template-columns: repeat(auto-fill, minmax(220px,1fr)); gap:12px; }
.card {
  background: var(--card);
  padding:12px;
  border-radius:8px;
  border:1px solid var(--card-border);
  cursor:pointer;
  transition: transform .08s ease, box-shadow .08s ease;
  min-height:64px;
  display:flex;
  flex-direction:column;
  justify-content:center;
  border-left: 6px solid transparent;
  color:var(--text);
  box-shadow: var(--card-shadow);
}
.card:hover { transform:translateY(-4px); box-shadow: 0 12px 30px rgba(0,0,0,0.08); }
.card .small { font-size:0.9rem; color:var(--muted); margin-top:6px; }

/* spacing */
#cardsContainerBuscar { margin-top:12px; }

/* ========== Important info panel ========== */
.important-info {
  padding:14px;
  border-radius:8px;
  border:1px solid var(--card-border);
  background: linear-gradient(180deg, var(--card), color-mix(in srgb, var(--card) 94%, black 2%));
  margin-top:4px;
  margin-bottom: var(--space-after-important);
  color: var(--text);
  box-shadow: var(--card-shadow);
}
.important-title-heading { font-weight:700; font-size:1rem; color:var(--text); }

/* meta badges */
.meta-row { display:flex; flex-wrap:wrap; gap:8px; margin-bottom:10px; }
.meta-badge { background: var(--badge-bg); color: var(--badge-color); padding:6px 10px; border-radius:999px; font-size:0.88rem; }

/* verifications */
.verificaciones-list { margin:6px 0 12px 0; padding-left:18px; }
.verificaciones-list li { margin-bottom:6px; }

/* observations */
.obs-sugeridas { margin-top:8px; color:var(--text); white-space:pre-wrap; }

/* ========== Dynamic header styling ========== */
.dynamic-header { display:flex; align-items:center; gap:10px; margin-bottom:8px; padding-bottom:6px; border-bottom:1px solid var(--input-border); }
.dynamic-separator { width:14px; height:3px; border-radius:2px; flex:0 0 auto; }

/* important headings */
.important-info h1, .important-info h2 { margin:0 0 8px 0; font-weight:700; }
.important-info h1 { font-size:1.2rem; }
.important-info h2 { font-size:1rem; margin-top:12px; }

/* important header inline */
.important-header { display:flex; align-items:center; gap:10px; }
.important-sep { width:14px; height:4px; border-radius:3px; flex:0 0 auto; }
.mono-id { font-family: 'Roboto Mono', monospace; font-weight:700; }

/* ========== Focus animation ========== */
.focus-animate { animation: focusPulse 700ms ease forwards; }
@keyframes focusPulse {
  0% { transform: translateY(0) scale(1); box-shadow: none; }
  40% { transform: translateY(-6px) scale(1.02); box-shadow: 0 8px 28px rgba(43,124,255,0.14); }
  100% { transform: translateY(0) scale(1); box-shadow: none; }
}

/* ========== Off-canvas ========== */
.offcanvas { position:fixed; top:80px; right:-340px; width:300px; max-width:300px; height:calc(100% - 120px); background:var(--card); border-left:1px solid var(--card-border); box-shadow:-8px 8px 24px rgba(0,0,0,0.08); transition:right .28s ease; z-index:1200; border-radius:8px 0 0 8px; overflow:hidden; }
.offcanvas[aria-hidden="false"] { right:12px; }
.offcanvas-header { display:flex; justify-content:flex-end; padding:6px; }
.offcanvas-list { padding:8px; overflow:auto; height:100%; }
.offcanvas .card { margin-bottom:8px; border-radius:6px; padding:10px; }

/* backdrop */
.offcanvas-backdrop { position:fixed; inset:0; z-index:1100; display:none; }
.offcanvas-backdrop.active { display:block; background: rgba(0,0,0,0.15); }

/* ========== Modal Ejecutivo ========== */
.modal-overlay[hidden] { display:none !important; }
.modal-overlay { position:fixed; inset:0; display:flex; align-items:center; justify-content:center; background:var(--modal-overlay); z-index:99999; }
.modal-dialog { width:100%; max-width:520px; background:var(--card); border-radius:8px; box-shadow:0 12px 32px var(--shadow); border:1px solid var(--card-border); overflow:hidden; }
.modal-header { padding:14px 16px; border-bottom:1px solid var(--card-border); }
.modal-body { padding:12px 16px; }
.modal-footer { padding:12px 16px; border-top:1px solid var(--card-border); display:flex; gap:8px; justify-content:flex-end; }
.ejecutivo-input-row { display:flex; gap:8px; align-items:center; }
.ejecutivo-input-row input[type="text"] { flex:1; padding:8px 10px; border-radius:6px; border:1px solid var(--input-border); height:40px; background:var(--input-bg); color:var(--text); }
.ejecutivo-controls { display:flex; gap:6px; }

/* ========== Utilities & PiP helper ========== */
.input-empty { border-color: #ff8c42 !important; box-shadow: 0 0 0 2px rgba(255,140,66,0.06); }
.pip-mini { display:inline-flex; align-items:center; justify-content:center; width:44px; height:34px; border-radius:10px; background: var(--accent-cool); color:#fff; box-shadow:0 6px 18px rgba(0,0,0,0.12); border:0; }

/* ========== Responsive tweaks ========== */
@media (max-width:900px) { .offcanvas{ right:-340px; width:300px; max-width:300px; } }
@media (max-width:640px) { .modal-dialog{ max-width:420px; margin:16px; } .input-row label{ min-width:110px; } .ejecutivo-input-row input[type="text"]{ height:38px; } .dynamic-header{ flex-wrap:wrap; gap:6px; } .dynamic-header div[style*="font-weight:700"]{ font-size:0.95rem; } }
@media (max-height:700px) { header h1{ font-size:1rem; } .card{ min-height:50px; } .inputs-area{ min-height:100px; } }


/* Custom dropdown for strict autocomplete */
.custom-datalist-wrapper { width: 100%; display: inline-block; }
.custom-datalist {
  border: 1px solid var(--input-border);
  background: var(--card);
  border-radius: 8px;
  box-sizing: border-box;
  max-height: calc(var(--baseline-height,38px) * 4 + 8px);
  overflow-y: auto;
  padding: 6px 0;
  margin-top: 6px;
}
/* items */
.custom-datalist-item { padding: 8px 12px; cursor: pointer; color: var(--text); }
.custom-datalist-item:hover, .custom-datalist-item.active {
  background: color-mix(in srgb, var(--accent) 8%, transparent);
  color: var(--text);
}

/* scrollbar styling - WebKit */
.custom-datalist::-webkit-scrollbar { width: 10px; height: 10px; }
.custom-datalist::-webkit-scrollbar-thumb {
  background: color-mix(in srgb, var(--accent) 14%, var(--input-border));
  border-radius: 999px;
  border: 2px solid transparent;
  background-clip: padding-box;
}
.custom-datalist::-webkit-scrollbar-track {
  background: transparent;
}

/* scrollbar for Firefox */
.custom-datalist { scrollbar-width: thin; scrollbar-color: color-mix(in srgb, var(--accent) 14%, var(--input-border)) transparent; }

/* Dark variant (uses same variables, but ensure visibility on dark backgrounds) */
html[data-theme="dark"] .custom-datalist {
  background: var(--card);
  border-color: var(--input-border);
  box-shadow: 0 8px 20px rgba(0,0,0,0.5);
}



















:root {
  --baseline-height: 38px;
}

/* Ensure generated inputs match the input-row inputs */
.generated-input,
.custom-datalist-wrapper input {
  width: 100%;
  flex: 1;
  padding: 8px 10px;
  border-radius: 6px;
  border: 1px solid var(--input-border);
  min-height: var(--baseline-height);
  height: auto;
  background: var(--input-bg);
  color: var(--text);
  font-family: inherit;
  box-sizing: border-box;
}

/* Custom dropdown wrapper and list */
.custom-datalist-wrapper { width: 100%; display: inline-block; position: relative; }

/* Dropdown: limit visible rows to 4; overflow scroll for more */
.custom-datalist {
  border: 1px solid var(--input-border);
  background: var(--card);
  border-radius: 8px;
  box-sizing: border-box;
  max-height: calc(var(--baseline-height) * 4 + 8px); /* 4 items */
  overflow-y: auto;
  padding: 6px 0;
  margin-top: 6px;
}

/* Item appearance */
.custom-datalist-item {
  padding: 8px 12px;
  cursor: pointer;
  color: var(--text);
  min-height: var(--baseline-height);
  display: flex;
  align-items: center;
}
.custom-datalist-item:hover,
.custom-datalist-item.active {
  background: color-mix(in srgb, var(--accent) 8%, transparent);
  color: var(--text);
}

/* Empty state */
.custom-datalist-empty { padding: 8px 12px; color: var(--muted); }

/* Scrollbar styling for dropdown (WebKit) */
.custom-datalist::-webkit-scrollbar { width: 10px; }
.custom-datalist::-webkit-scrollbar-thumb {
  background: color-mix(in srgb, var(--accent) 14%, var(--input-border));
  border-radius: 999px;
  border: 2px solid transparent;
  background-clip: padding-box;
}
.custom-datalist::-webkit-scrollbar-track { background: transparent; }

/* Firefox scrollbar for dropdown */
.custom-datalist { scrollbar-width: thin; scrollbar-color: color-mix(in srgb, var(--accent) 14%, var(--input-border)) transparent; }

/* Dark variant for dropdown (uses same CSS variables so it adapts automatically) */
html[data-theme="dark"] .custom-datalist {
  background: var(--card);
  border-color: var(--input-border);
  box-shadow: 0 8px 20px rgba(0,0,0,0.5);
}

/* Global page scrollbar styling (WebKit) to match dropdown aesthetics */
body::-webkit-scrollbar { width: 12px; height: 12px; }
body::-webkit-scrollbar-thumb {
  background: color-mix(in srgb, var(--accent) 12%, var(--input-border));
  border-radius: 999px;
  border: 2px solid transparent;
  background-clip: padding-box;
}
body::-webkit-scrollbar-track { background: transparent; }

/* Firefox global scrollbar */
* { scrollbar-width: thin; scrollbar-color: color-mix(in srgb, var(--accent) 12%, var(--input-border)) transparent; }

/* Small helper to keep dropdown z-index above other elements but below modal overlays */
.custom-datalist { z-index: 2200; }

/* Keep visual parity: when wrapper contains dropdown, layout consistent */
.custom-datalist-wrapper .custom-datalist { width: 100%; box-sizing: border-box; }

/* Keep .input-empty visual indicator (already used earlier) */
.input-empty { border-color: #ff4d4f !important; box-shadow: 0 0 0 2px rgba(255,140,66,0.06); }









/* (Reemplaza o a√±ade estas reglas en tu style.css) */
/* Bot√≥n de peligro (rojo) */
.btn.danger {
  background: #ff4d4f;
  color: #ffffff;
  border: 0;
  box-shadow: 0 8px 20px rgba(255,77,79,0.12);
}
.btn.danger:hover { filter: brightness(.96); transform: translateY(-1px); }

/* Dark mode variant for danger */
html[data-theme="dark"] .btn.danger {
  background: #ff6b6b;
  color: #0b1220;
  box-shadow: 0 8px 20px rgba(255,107,107,0.06);
}




/* (Modificaciones para Hist√≥rico a√±adidas al final de style.css) */
/* Estilos para la secci√≥n Hist√≥rico y tarjetas hist√≥ricas - actualizado para mostrar solo 2 contenedores en portada y tarjeta m√°s alta */

.history-card {
  background: var(--card);
  padding: 12px;
  border-radius: 8px;
  border: 1px solid var(--card-border);
  box-shadow: var(--card-shadow);
  display: flex;
  flex-direction: column;
  gap: 8px;
  /* Tama√±o vertical aumentado (cm) para evitar cortar la informaci√≥n de los dos primeros contenedores */
  min-height: 5.5cm;
  max-height: 6.5cm; /* mantiene la tarjeta dentro de un rango razonable */
  overflow: hidden;
  position: relative;
}

/* N√∫mero de tarjeta en esquina superior derecha */
.history-card .index-badge {
  position: absolute;
  top: 8px;
  right: 10px;
  background: var(--badge-bg);
  color: var(--badge-color);
  padding: 6px 8px;
  border-radius: 999px;
  font-weight:700;
  font-size:0.85rem;
}

/* Contenedores dentro de la tarjeta (visibles en portada): truncado con ellipsis multi-line.
   Ajustamos el n√∫mero de l√≠neas para que tanto label como parte del value se muestren.
*/
.history-card .container {
  font-size: 0.94rem;
  color: var(--text);
  line-height: 1.25;
  display: -webkit-box;
  -webkit-line-clamp: 4; /* l√≠neas por contenedor visibles en portada (ajustable) */
  -webkit-box-orient: vertical;
  overflow: hidden;
  text-overflow: ellipsis;
  max-height: calc(1.25em * 4);
}

/* Etiqueta en negrita y valor debajo (dentro del contenedor) */
.history-card .label {
  font-weight: 700;
  display:block;
  margin-bottom:4px;
}
.history-card .value {
  display:block;
  color: var(--muted);
}

/* Botones en la parte inferior de la tarjeta */
.history-card .card-actions {
  display:flex;
  gap:8px;
  align-items:center;
  margin-top:auto;
}

/* Bot√≥n peligro: reutilizamos .btn.danger, y bot√≥n peque√±o para ojo y copiar */
.history-card .btn-small {
  padding:6px 8px;
  border-radius:6px;
  font-size:0.95rem;
  cursor:pointer;
  border:1px solid var(--border);
  background: var(--card);
  color: var(--text);
}
.history-card .btn-small:hover { transform: translateY(-1px); }

/* Iconos: ojo y copiar (se usan pseudo-content para mantener consistencia) */
.history-card .btn-eye::after { content: "üëÅÔ∏è"; display:inline-block; }
.history-card .btn-copy::after { content: "üìã"; display:inline-block; }

/* Modal detalle hist√≥rico reutiliza clases de modal ya definidas */

/* Ajuste responsive: reducir altura moderadamente en m√≥viles */
@media (max-width:640px) {
  .history-card { min-height: 4.2cm; max-height: 5.2cm; }
  .history-card .container { -webkit-line-clamp: 3; max-height: calc(1.25em * 3); }
}



/* A√±adidos/ajustes para la cabecera del Hist√≥rico y botones de exportar/vaciar */

/* Cabecera espec√≠fica del hist√≥rico */
.historico-header { margin-bottom: 12px; max-width:1100px; margin-left:auto; margin-right:auto; padding:0 0; }

/* Acciones alineadas a la derecha (ya usamos inline styles en HTML, estas reglas sirven como refuerzo) */
.historico-actions { display:flex; gap:8px; align-items:center; }

/* Peque√±o ajuste al bot√≥n export en tama√±os peque√±os */
@media (max-width:640px) {
  .historico-actions .btn { padding:6px 8px; font-size:0.9rem; }
}






